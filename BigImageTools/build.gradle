apply plugin: 'java-library'
apply plugin: 'eclipse'

version = '0.0.1'
task wrapper(type: Wrapper) {
	gradleVersion = '4.3'
}

repositories {
	jcenter()
	mavenCentral()
	maven {
		name 'Unidata'
		url 'https://artifacts.unidata.ucar.edu/content/repositories/unidata-releases'
	}
	maven {
		url 'https://artifacts.openmicroscopy.org/artifactory/maven/'
	}
}

println "ICY_HOME=${System.env.ICY_HOME}"
dependencies {
	// Use JUnit test framework
	testImplementation 'org.hamcrest:hamcrest-all:1.3'
	testImplementation 'junit:junit:4.12'

	// 1.1 External libraries
	implementation 'ome:bio-formats-tools:5.7.2'
	implementation 'javax.vecmath:vecmath:1.5.2'
	implementation 'org.ehcache:ehcache:3.4.0'
	implementation 'javax.cache:cache-api:1.0.0'

	// 1.2. Icy libraries
	implementation files("${System.env.ICY_HOME}/icy.jar") // Icy core
	implementation files("${System.env.ICY_HOME}/plugins/adufour/ezplug/EzPlug.jar") // EzPlug
	implementation files("${System.env.ICY_HOME}/plugins/adufour/blocks/Blocks.jar") // Blocks
	implementation files("${System.env.ICY_HOME}/plugins/adufour/protocols/Protocols.jar") // Protocols
	implementation files("${System.env.ICY_HOME}/plugins/adufour/thresholder/Thresholder.jar") // Thresholder
}

eclipse {
	classpath.downloadJavadoc = true

	project {
		buildCommand 'org.eclipse.buildship.core.gradleprojectbuilder'
		
		natures += ['icy.icy4eclipse.core.icynature']
		natures += ['org.eclipse.buildship.core.gradleprojectnature']
	}
}